(this["webpackJsonpstar-db"]=this["webpackJsonpstar-db"]||[]).push([[0],{29:function(e,t,n){},35:function(e,t,n){},36:function(e,t,n){},37:function(e,t,n){},38:function(e,t,n){},40:function(e,t,n){},41:function(e,t,n){},42:function(e,t,n){},43:function(e,t,n){},44:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n(1),s=n.n(a),c=n(22),i=n.n(c),o=n(7),l=n(8),u=n(11),d=n(10),p=n(14),j=n(2),h=(n(29),function(){return Object(r.jsxs)("header",{className:"header",children:[Object(r.jsx)("div",{className:"header__logo",children:"Star DB"}),Object(r.jsxs)("ul",{className:"header__list",children:[Object(r.jsx)("li",{className:"header__list-item",children:Object(r.jsx)(p.b,{to:"/people/",children:"People"})}),Object(r.jsx)("li",{className:"header__list-item",children:Object(r.jsx)(p.b,{to:"/planet/",children:"Planets"})}),Object(r.jsx)("li",{className:"header__list-item",children:Object(r.jsx)(p.b,{to:"/starship/",children:"Starships"})})]})]})}),m=(n(35),function(e){var t=e.item,n=e.field,a=e.label;return Object(r.jsxs)("li",{className:"list-group-item",children:[Object(r.jsx)("span",{className:"term",children:a}),Object(r.jsx)("span",{children:t[n]})]})}),b=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={itemIdBody:null,image:null},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.updateItemBody()}},{key:"componentDidUpdate",value:function(e){this.props.itemId===e.itemId&&this.props.getData===e.getData||this.updateItemBody()}},{key:"updateItemBody",value:function(){var e=this,t=this.props,n=t.itemId,r=t.getData,a=t.getImageUrl;n&&r(n).then((function(t){e.setState({itemIdBody:t,image:a(t)})}))}},{key:"render",value:function(){var e=this;return this.state.itemIdBody?Object(r.jsxs)("div",{className:"item-details card",children:[Object(r.jsx)("img",{className:"item-image",src:this.state.image,alt:"\u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0430 \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u0430 \u0441\u043f\u0438\u0441\u043a\u0430"}),Object(r.jsxs)("div",{className:"card-body",children:[Object(r.jsx)("h4",{children:this.state.itemIdBody.name}),Object(r.jsx)("ul",{className:"list-group list-group-flush",children:s.a.Children.map(this.props.children,(function(t){return s.a.cloneElement(t,{item:e.state.itemIdBody})}))})]})]}):Object(r.jsx)("span",{children:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043f\u0435\u0440\u0441\u043e\u043d\u0430\u0436\u0430 \u0438\u0437 \u0441\u043f\u0438\u0441\u043a\u0430"})}}]),n}(a.Component),f=n(15),O=(n(36),function(){return Object(r.jsx)("div",{className:"spinner-wrap",children:Object(r.jsxs)("div",{className:"spinner-body",children:[Object(r.jsx)("div",{}),Object(r.jsx)("div",{}),Object(r.jsx)("div",{children:Object(r.jsx)("div",{})}),Object(r.jsx)("div",{children:Object(r.jsx)("div",{})})]})})}),g=(n(37),function(){return Object(r.jsxs)("div",{className:"error-indicator",children:[Object(r.jsx)("h2",{children:"404"}),Object(r.jsx)("span",{children:"\u041d\u0435\u043f\u0440\u0438\u044f\u0442\u043d\u0430\u044f \u043e\u0448\u0438\u0431\u043a\u0430"}),Object(r.jsx)("span",{children:"\u041d\u043e, \u043c\u044b \u0432\u0441\u0435 \u0438\u0441\u043f\u0440\u0430\u0432\u0438\u043c, \u043f\u043e\u0442\u043e\u043c. . ."})]})}),x=g,v=function(e,t){return function(n){Object(u.a)(s,n);var a=Object(d.a)(s);function s(){var e;Object(o.a)(this,s);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=a.call.apply(a,[this].concat(n))).state={dataHOC:[],loading:!1,error:!1},e}return Object(l.a)(s,[{key:"componentDidMount",value:function(){this.update()}},{key:"componentDidUpdate",value:function(e){this.props.getDataFunction!==e.getDataFunction&&this.update()}},{key:"update",value:function(){var e=this;this.setState({loading:!0,error:!1}),t().then((function(t){e.setState({dataHOC:t,loading:!1})})).catch((function(){e.setState({error:!0,loading:!1})}))}},{key:"render",value:function(){var t=this.state.dataHOC;return this.state.loading?Object(r.jsx)(O,{}):this.state.error?Object(r.jsx)(x,{}):Object(r.jsx)(e,Object(f.a)(Object(f.a)({},this.props),{},{dataHOC:t}))}}]),s}(a.Component)},w=s.a.createContext(),y=w.Provider,I=w.Consumer,P=function(e){return function(t){return Object(r.jsx)(I,{children:function(n){return Object(r.jsx)(e,Object(f.a)(Object(f.a)({},t),{},{swapiService:n}))}})}},S=P((function(e){var t=e.itemId,n=e.swapiService;return Object(r.jsxs)(b,{getData:n.getPerson,getImageUrl:n.getPersonImage,itemId:t,children:[Object(r.jsx)(m,{field:"gender",label:"Gender"}),Object(r.jsx)(m,{field:"eyeColor",label:"Eye Color"})]})})),N=P((function(e){var t=e.itemId,n=e.swapiService;return Object(r.jsxs)(b,{getData:n.getPlanet,getImageUrl:n.getPlanetImage,itemId:t,children:[Object(r.jsx)(m,{field:"population",label:"Population"}),Object(r.jsx)(m,{field:"rotationPeriod",label:"Rotation Period"}),Object(r.jsx)(m,{field:"diameter",label:"Diameter"})]})})),_=P((function(e){var t=e.itemId,n=e.swapiService;return Object(r.jsxs)(b,{getData:n.getStarships,getImageUrl:n.getStarshipImage,itemId:t,children:[Object(r.jsx)(m,{field:"model",label:"Model"}),Object(r.jsx)(m,{field:"length",label:"Length"}),Object(r.jsx)(m,{field:"costCredits",label:"Credits"})]})})),k=(n(38),function(e){var t=e.dataHOC.map((function(t){var n=e.children(t);return Object(r.jsx)("li",{className:"list-group-item",onClick:function(){return e.onItemSelected(t.id)},children:n},t.id)}));return Object(r.jsx)("ul",{className:"item-list list-group",children:t})}),C=n(4),D=n.n(C),E=n(12),A=function(){function e(){var t=this;Object(o.a)(this,e),this.getResourse=function(){var e=Object(E.a)(D.a.mark((function e(t){var n,r;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:if((n=e.sent).ok){e.next=5;break}throw new Error("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c \u0437\u0430\u043f\u0440\u043e\u0441 \u043f\u043e \u0430\u0434\u0440\u0435\u0441\u0443 ".concat(t,", \u043e\u0448\u0438\u0431\u043a\u0430 \u2116 ").concat(n.status));case 5:return e.next=7,n.json();case 7:return r=e.sent,e.abrupt("return",r);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this._transformPlanet=function(e){return{id:t._extractId(e),name:e.name,population:e.population,rotationPeriod:e.rotation_period,diameter:e.diameter}},this._transformPerson=function(e){return{id:t._extractId(e),birthYear:e.birth_year,eyeColor:e.eye_color,gender:e.gender,hairColor:e.hair_color,height:e.height,mass:e.mass,name:e.name,personSkin:e.skin_color}},this._transformStarShip=function(e){return{id:t._extractId(e),model:e.model,name:e.name,manufacturer:e.manufacturer,costCredits:e.cost_in_credits,length:e.length,passengers:e.passengers,crew:e.crew,cargoCapacity:e.cargo_capacity}},this.getPersonImage=function(e){var t=e.id;return"https://starwars-visualguide.com/assets/img/characters/".concat(t,".jpg")},this.getStarshipImage=function(e){var t=e.id;return"https://starwars-visualguide.com/assets/img/starships/".concat(t,".jpg")},this.getPlanetImage=function(e){var t=e.id;return"https://starwars-visualguide.com/assets/img/planets/".concat(t,".jpg")},this.getAllPerson=Object(E.a)(D.a.mark((function e(){var n;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getResourse("https://swapi.dev/api/people/");case 2:return n=e.sent,e.abrupt("return",n.results.map(t._transformPerson));case 4:case"end":return e.stop()}}),e)}))),this.getPerson=function(){var e=Object(E.a)(D.a.mark((function e(n){var r;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getResourse("https://swapi.dev/api/people/".concat(n));case 2:return r=e.sent,e.abrupt("return",t._transformPerson(r));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getAllPlanets=Object(E.a)(D.a.mark((function e(){var n;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getResourse("https://swapi.dev/api/planets/");case 2:return n=e.sent,e.abrupt("return",n.results.map(t._transformPlanet));case 4:case"end":return e.stop()}}),e)}))),this.getPlanet=function(){var e=Object(E.a)(D.a.mark((function e(n){var r;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getResourse("https://swapi.dev/api/planets/".concat(n));case 2:return r=e.sent,e.abrupt("return",t._transformPlanet(r));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getAllStarships=Object(E.a)(D.a.mark((function e(){var n;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getResourse("https://swapi.dev/api/starships/");case 2:return n=e.sent,e.abrupt("return",n.results.map(t._transformStarShip));case 4:case"end":return e.stop()}}),e)}))),this.getStarships=function(){var e=Object(E.a)(D.a.mark((function e(n){var r;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getResourse("https://swapi.dev/api/starships/".concat(n));case 2:return r=e.sent,e.abrupt("return",t._transformStarShip(r));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}return Object(l.a)(e,[{key:"_extractId",value:function(e){return e.url.match(/\/([0-9]*)\/$/)[1]}}]),e}(),B=new A,R=v(k,B.getAllPerson),M=v(k,B.getAllPlanets),U=v(k,B.getAllStarships),H=(n(40),function(e){var t=e.leftElement,n=e.rightElement;return Object(r.jsxs)("div",{className:"row mb2",children:[Object(r.jsx)("div",{className:"col-md-6",children:t}),Object(r.jsx)("div",{className:"col-md-6",children:n})]})}),F=Object(j.g)((function(e){return Object(r.jsx)(H,{leftElement:Object(r.jsx)(R,{onItemSelected:function(t){e.history.push(t)},children:function(e){return"".concat(e.name," ")}}),rightElement:Object(r.jsx)(S,{itemId:e.match.params.id})})})),L=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={selectedItem:null},e.onItemSelected=function(t){e.setState({selectedItem:t})},e}return Object(l.a)(n,[{key:"render",value:function(){return Object(r.jsx)(H,{leftElement:Object(r.jsx)(M,{onItemSelected:this.onItemSelected,children:function(e){return"".concat(e.name)}}),rightElement:Object(r.jsx)(N,{itemId:this.state.selectedItem})})}}]),n}(a.Component),J=Object(j.g)((function(e){return Object(r.jsx)(U,{onItemSelected:function(t){return e.history.push(t)},children:function(e){return"".concat(e.name," ")}})})),G=(n(41),function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).swapi=new A,e.state={planet:{},loading:!0,error:!1},e.onError=function(t){e.setState({error:!0,loading:!1})},e.onPlanetLoaded=function(t){e.setState({planet:t,loading:!1})},e.updatePlanet=function(){var t=Math.floor(17*Math.random())+2;e.swapi.getPlanet(t).then(e.onPlanetLoaded).catch(e.onError)},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.updatePlanet(),setInterval(this.updatePlanet,this.props.updateInterval)}},{key:"render",value:function(){var e=!(this.state.loading||this.state.error),t=this.state.loading?Object(r.jsx)(O,{}):null,n=e?Object(r.jsx)(Y,{planet:this.state.planet}):null,a=this.state.error?Object(r.jsx)(g,{}):null;return Object(r.jsxs)("div",{className:"random-planet card",children:[a,t,n]})}}]),n}(a.Component));G.defaultProps={updateInterval:1e4};var Y=function(e){var t=e.planet;return Object(r.jsxs)(s.a.Fragment,{children:[Object(r.jsx)("img",{className:"random-planet-image",src:"https://starwars-visualguide.com/assets/img/planets/".concat(t.id,".jpg"),alt:"planet"}),Object(r.jsxs)("div",{className:"card-body",children:[Object(r.jsx)("h4",{children:t.name}),Object(r.jsxs)("ul",{className:"list-group list-group-flush",children:[Object(r.jsxs)("li",{className:"list-group-item",children:[Object(r.jsx)("span",{className:"term",children:"Population"}),Object(r.jsx)("span",{children:t.population})]}),Object(r.jsxs)("li",{className:"list-group-item",children:[Object(r.jsx)("span",{className:"term",children:"Rotation Period"}),Object(r.jsx)("span",{children:t.rotationPeriod})]}),Object(r.jsxs)("li",{className:"list-group-item",children:[Object(r.jsx)("span",{className:"term",children:"Diameter"}),Object(r.jsx)("span",{children:t.diameter})]})]})]})]})},$=G,q=(n(42),n(43),function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={swapiService:new A},e}return Object(l.a)(n,[{key:"render",value:function(){return Object(r.jsx)(y,{value:this.state.swapiService,children:Object(r.jsx)(p.a,{children:Object(r.jsxs)("div",{className:"section-outer",children:[Object(r.jsx)(h,{}),Object(r.jsx)($,{updateInterval:5e3}),Object(r.jsxs)(j.d,{children:[Object(r.jsx)(j.b,{path:"/people/:id?",component:F}),Object(r.jsx)(j.b,{path:"/planet",component:L}),Object(r.jsx)(j.b,{path:"/starship",exact:!0,component:J}),Object(r.jsx)(j.b,{path:"/starship/:id",render:function(e){var t=e.match;return Object(r.jsx)(_,{itemId:t.params.id})}}),Object(r.jsx)(j.a,{to:"./planet"})]})]})})})}}]),n}(a.Component));i.a.render(Object(r.jsx)(q,{}),document.getElementById("root"))}},[[44,1,2]]]);
//# sourceMappingURL=main.24cf6c63.chunk.js.map